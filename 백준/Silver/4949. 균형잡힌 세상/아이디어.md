# 아이디어
괄호 문자열 판단은 대표적인 스택 문제이다.

## 문제 파악하기
세계는 균형이 잘 잡혀있어야 한다. 양과 음, 빛과 어둠 그리고 왼쪽 괄호와 오른쪽 괄호처럼 말이다. 정민이의 임무는 어떤 문자열이 주어졌을 때, 괄호들의 균형이 잘 맞춰져 있는지 판단하는 프로그램을 짜는 것이다. 문자열에 포함되는 괄호는 소괄호("()") 와 대괄호("[]")로 2종류이고, 문자열이 균형을 이루는 조건은 아래와 같다.

- 모든 왼쪽 소괄호("(")는 오른쪽 소괄호(")")와만 짝을 이뤄야 한다.
- 모든 왼쪽 대괄호("[")는 오른쪽 대괄호("]")와만 짝을 이뤄야 한다.
- 모든 오른쪽 괄호들은 자신과 짝을 이룰 수 있는 왼쪽 괄호가 존재한다.
- 모든 괄호들의 짝은 1:1 매칭만 가능하다. 즉, 괄호 하나가 둘 이상의 괄호와 짝지어지지 않는다.
- 짝을 이루는 두 괄호가 있을 때, 그 사이에 있는 문자열도 균형이 잡혀야 한다.

정민이를 도와 문자열이 주어졌을 때 균형잡힌 문자열인지 아닌지를 판단해보자.

---

입력은 다음과 같이 주어진다:
- 각 문자열은 마지막 글자를 제외하고 영문 알파벳, 공백, 소괄호("( )"), 대괄호("[ ]")로 이루어져 있으며, 온점(".")으로 끝나고, 길이는 100글자보다 작거나 같다.
- 입력의 종료조건으로 맨 마지막에 온점 하나(".")가 들어온다.

출력으로 각 줄마다 해당 문자열이 균형을 이루고 있으면 "yes"를, 아니면 "no"를 출력한다.

## 방법 고안
올바른 괄호 문자열(VPS)의 경우 괄호를 하나씩 닫아나갈 수 있다. 올바른 괄호의 경우 `)`가 나오기 전 맨 마지막에 `(`가 있어서 서로 상쇄시키다 보면 마지막에는 빈칸이 되어 모든 괄호가 서로 짝을 맞춰 상쇄시킬 수 있지만, `)`가 `(` 없이 나타나는 경우에는 올바르지 않은 문자열이 된다. 즉, 스택을 활용하여 맨 위에 있는 값과 함께 들어오는 값을 계속 체크해주며 짝을 맞춰가는 것이 중요하다. 동시에 `()` 괄호가 아닌 `[]` 괄호도 있다는 점에 착안하여 구성해나가자.

## 코드화
### 내 코드 (Python 3 - 76ms, 32412 KB)
```python
import sys
input = sys.stdin.readline

ans = []

while True:
    stack = []
    line = input().rstrip()
    if line == ".":
        break

    for ch in line:
        if ch in {'(', ')', '[', ']'}:
            if not stack:
                stack.append(ch)
            elif stack[-1] == '(' and ch == ')':
                stack.pop()
            elif stack[-1] == '[' and ch == ']':
                stack.pop()
            else:
                stack.append(ch)

    ans.append("yes" if not stack else "no")

print("\n".join(ans))
```

`stack` 리스트를 만들어서, 각각의 테스트 케이스를 실행해보자. `line`으로서 오른쪽의 개행 문자를 삭제한 `strip()` 형태의 `input()`을 받아야 한다. 만약 삭제하지 않으면 VPS 판단에 `\n`이 관여한다. 아무튼, 한 문자씩 받아서 처리하는데,
- 문자가 괄호가 아닌 경우 돌리지 않게 `if` 문으로 먼저 거르고
- 스택이 비어 있으면 무조건 `append`
- 비어 있지 않을 때 마지막 괄호가 `()` 혹은 `[]`로 맞을 수 있는 경우라면 `pop`
- 그렇지 않다면 모두 `append`

와 같은 조건문으로 진행한다. 이때, 굳이 왜 비어 있는 경우를 상정하였는지 생각해볼 수도 있겠지만, 이 경우는 `stack[-1]`의 참조 오류를 방지하기 위해서이다. 비어있지 않는 경우에 참조하면 문제가 없지만 비어 있을 때는 index out of range가 되기 때문에 잘못된 참조로 오류가 발생함을 유의해야 한다.

그래서 스택이 모두 비어버리거나 아니거나에 따라 답을 한 줄에 하나씩 출력하기 위해 `ans.append`를 사용하였고, 한 번에 처리하기 위해 `ans`에 `join`을 활용하여 줄바꿈을 추가해 출력하였다.

## 정리
간단한 스택 문제이다.
