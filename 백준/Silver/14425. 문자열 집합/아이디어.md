# 아이디어
집합(set)의 python에서의 특징을 잘 활용하는 것이 중요한 문제

## 문제 파악하기
총 $N$개 문자열로 이루어진 집합 $S$가 주어진다. 입력으로 주어지는 $M$개 문자열 중에서 집합 $S$에 포함되어 있는 것이 총 몇 개인지 구하는 프로그램을 작성하자.

---

입력은 다음과 같이 주어진다.
- 첫째 줄에 문자열의 개수 $N$과 $M$이 주어진다.
- $N$과 $M$은 10000 이하의 자연수이다.
- 다음 $N$개 줄에는 집합 $S$에 포함되어 있는 문자열들이 주어진다.
- 다음 $M$개 줄에는 검사해야 하는 문자열들이 주어진다.
- 입력으로 주어지는 문자열은 알파벳 소문자로만 이루어져 있으며 길이는 500을 넘지 않는다. 집합 $S$에 같은 문자열이 여러 번 주어지는 경우는 없다.

출력으로 첫째 줄에 $M$개의 문자열 중 총 몇 개가 집합 $S$에 포함되어 있는지 출력한다.

## 방법 고안
파이썬의 집합(set) 내에서는 내부적인 해시 테이블을 사용함을 이용하면 좋은 문제이다.

### 파이썬의 set
set은 collection이면서 순서의 개념이 존재하지 않고 중복을 허용하지 않는 집합이다. 파이썬에서의 set 구조는 해시 테이블을 이용한다. 해시는 임의 변수나 문자열 등을 숫자로 변환하여 매핑하는 것을 의미하고, 임의의 변수가 오더라도 숫자로 매핑이 가능하고 이 숫자로 매핑한 경우 인덱스처럼 사용할 수 있어서 빠른 검색이 가능하다.

## 코드화
```python
import sys
input = sys.stdin.readline

n, m = map(int, input().split())
wordSet = set(input().strip() for _ in range(n))

print(sum(1 for _ in range(m) if input().strip() in wordSet))
```

$n, m$의 값을 받아서 `for` 문을 돌릴 때 사용한다.

- `wordSet` 집합을 `set()` 내부에 `n`개 줄에 대하여 입력을 받아 생성한다.
- `input` 을 `sys.stdin.readline`으로 지정하여 속도를 보장하되 개행 문자를 `strip()`으로 지워주었다.

출력 부분을 한 줄로 줄여 두었는데, 이를 하나씩 보자면

- `if input().strip in wordSet` : 한 줄의 검사 단어를 받아서 `wordSet` 안에 있는지 해시 테이블 방식으로 검사하여 존재를 확인했다면
- `1 for _ in range(m)` : 뒤쪽의 if문을 m번 반복하여 확인하면서 만약 if문이 맞다면 값을 1로 한다
- `sum()` 안에 위의 for문과 if문이 함께 있으므로, 모든 경우에 대해 검사를 하면서 1을 계속 합해주면 된다.
- 그리고 이것을 `print()`로 묶어 출력해줬다.



## 정리
python `set`의 내부 구조는 해시 테이블이다.

### 해시 테이블이란?
데이터를 key-value 쌍으로 저장하는 자료구조로, key를 해시 함수에 넣어서 나온 해시 값(hash value)를 기반으로 저장 위치(index)를 빠르게 계산한다. 여기에서 `set`은 value 없이 key만 저장하는 key-only의 해시 테이블로 보면 된다. 즉, `dict`에서 value를 버린 구조로 볼 수 있는데, 실제로 내부적으로는 거의 동일하게 작동한다.

```python
s = set(["a", "b", "c"])
d = {"a": True, "b": True, "c": True}
```

내부적인 해시 함수에 의하여 특정 인덱스에 저장되기 때문에 `object in set` 같은 방식으로 체크하면 해시 값을 바로 찾아서 검색하기 때문에 매우 빠른 탐색이 가능하다.

### 해시 테이블의 간략한 동작 방식
1. 삽입
삽입되는 특정 객체 혹은 변수 등의 해시 값을 계산(`hash()`)하고 이 값을 배열의 크기로 나눈 나머지를 인덱스로 사용한다. (충돌 방지를 위한 것) 그리고 해당 위치에 객체를 저장한다.

2. 검색
특정 객체 혹은 변수에 대해 `object in set` 수행 시 같은 방식으로 해시 값을 계산하고 저장 위치를 찾아서 해당 위치에 있다면 `True`를 반환한다.

3. 충돌 처리(Collision Handling)
서로 다른 값이 같은 해시 값을 가질 수 있다. 이 경우를 충돌한다고 하는데, Python은 오픈 어드레싱(open addressing) 방식으로 이를 처리하여 충돌이 발생하면 다음 빈 슬롯을 찾는다(linear probing 등)

해시 충돌이 심하면 시간 복잡도가 최악의 경우 $O(n)$까지 치닫을 수 있지만, 파이썬은 해시 함수 최적화와 리사이징(재해싱) 기능으로 이런 상황을 잘 피하게 되어 있기 때문에 평균적으로 상수 시간($O(1)$)에 삽입, 삭제, 검색이 가능하게 한다.

다만, `set` 내부에는 해시 가능한(immutable) 값만이 들어갈 수 있다. `list`나 `dict`, `set` 같은 mutable하고 해시 불가능한 값들은 넣을 수 없다.
